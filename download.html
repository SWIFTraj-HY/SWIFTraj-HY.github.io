<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>SWIFTraj - Download</title>
  
  <link rel="icon" type="image/x-icon" href="static/images/favicon.ico">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="static/css/bulma.min.css">
  <link rel="stylesheet" href="static/css/fontawesome.all.min.css">
  <link rel="stylesheet" href="static/css/index.css">
  
  <script defer src="static/js/fontawesome.all.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script defer src="static/js/common.js"></script>

  <style>
    /* Custom styles for the download interface */
    .download-interface {
      margin-bottom: 2rem;
    }
    
    .panel-header {
      background-color: #094aed;
      color: #fff;
      text-transform: uppercase;
      padding: 0.5rem 1rem;
      font-weight: 600;
      text-align: center;
      letter-spacing: 1px;
    }

    .selection-grid {
      display: grid;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }

    /* Location Grid: 3 columns */
    .location-grid {
      grid-template-columns: repeat(3, 1fr);
    }

    /* Date/Time Grid: 1 or 2 columns */
    .date-grid, .time-grid {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    /* Grid layout for dates when needed (e.g. Yingtian 2x2) */
    .date-grid-2col {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0.5rem;
    }
    
    .time-grid-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 0.5rem;
    }

    .selector-btn {
      background-color: #e0e0e0; /* Light gray default */
      border: none;
      padding: 0.5rem;
      cursor: pointer;
      text-align: center;
      font-weight: 500;
      transition: all 0.2s;
      width: 100%;
    }

    .selector-btn:hover {
      opacity: 0.8;
    }

    /* Active states */
    .selector-btn.is-location.active {
      background-color: #a4d05d; /* Greenish */
      color: #000;
    }

    .selector-btn.is-date.active, .selector-btn.is-time.active {
      background-color: #7abaff; /* Blueish */
      color: #000;
    }
    
    .selector-btn.is-all-drones {
      background-color: #e0e0e0; /* Light gray default like others */
      margin-top: 0.5rem;
      border: none;
      padding: 0.5rem;
      cursor: pointer;
      text-align: center;
      font-weight: 500;
      transition: all 0.2s;
      width: 100%;
    }
    
    .selector-btn.is-all-drones:hover {
       opacity: 0.8;
    }
    
    .selector-btn.is-all-drones.active {
      background-color: #7abaff; /* Blueish to match ALL DRONES style in reference or green? User said green like A1. */
      /* User said: "选中后是和A1这些按钮一样绿色颜色" which is #a4d05d */
      background-color: #7abaff; /* Wait, reference image shows ALL DRONES is BLUE. 
         But user text says: "选中后是和A1这些按钮一样绿色颜色". 
         Actually, let's look at the reference image again. 
         Reference image: Location 1-10 are green. ALL DRONES is Blue.
         User request: "选中后是和A1这些按钮一样绿色颜色" -> User explicitly asked for GREEN (like A1). 
         I will follow user instruction over image. */
      background-color: #a4d05d; 
      color: #000;
      font-weight: 700;
      border: none;
    }

    .info-btn {
      background-color: #e08e8e; /* Red/Pinkish */
      color: white;
      width: 100%;
      border: none;
      padding: 1rem;
      font-size: 1.25rem;
      font-weight: 600;
      cursor: pointer;
      text-transform: uppercase;
      margin-top: 1rem;
    }
    
    .info-btn:hover {
      background-color: #d43e3e;
    }

    .map-container {
      border: 1px solid #ddd;
    }
    
    .map-container img {
        width: 100%;
        height: auto;
        display: block;
    }

    .result-box {
        margin-top: 1rem;
        padding: 1rem;
        background-color: #f5f5f5;
        border-left: 5px solid #3273dc;
        display: none;
    }
    
    /* Layout Helpers */
    .control-panel-row {
        display: flex;
        gap: 1rem;
    }
    .control-column-left {
        flex: 1;
    }
    .control-column-right {
        flex: 1;
    }
    
    /* New Location Layout Styles */
    .location-split-container {
        display: flex;
        gap: 0.75rem;
        margin-top: 0.5rem;
        margin-bottom: 1rem;
    }
    
    .location-box {
        flex: 1;
        border: 2px dashed #b5b5b5;
        padding: 0.5rem;
        border-radius: 6px;
    }
    
    .location-box-title {
        text-align: center;
        font-weight: 700;
        font-size: 0.8rem;
        margin-bottom: 0.5rem;
        color: #4a4a4a;
        text-transform: uppercase;
        border-bottom: 1px solid #eee;
        padding-bottom: 0.25rem;
    }

    /* Dataset Title Styling */
    .dataset-title {
        font-size: 1.5rem;
        font-weight: 800;
        color: #2c3e50;
        margin-bottom: 1rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid #f0f0f0;
        display: flex;
        align-items: center;
        letter-spacing: -0.5px;
    }
    
    .dataset-title::before {
        content: '';
        display: inline-block;
        width: 8px;
        height: 24px;
        background: linear-gradient(to bottom, #094aed, #3273dc);
        margin-right: 12px;
        border-radius: 4px;
    }
  </style>
</head>
<body>

  <section class="section">
    <div class="container is-max-desktop">
      <h1 class="title is-2 has-text-centered">Download Dataset</h1>
      
      <!-- Hurong Dataset Interface -->
      <h3 class="dataset-title">Hurong Dataset</h3>
      <div class="box download-interface" id="interface-hurong">
        <div class="columns">
            <!-- Map Section -->
            <div class="column is-two-thirds">
                <div class="panel-header">MAP</div>
                <div class="map-container">
                    <img src="static/images/satellite.png" alt="Dataset Map">
                </div>
            </div>

            <!-- Controls Section -->
            <div class="column">
                
                <!-- Location Section (Full Width) -->
                <div class="panel-header">LOCATION</div>
                <div class="location-split-container">
                    <!-- Expressway (Existing) -->
                    <div class="location-box">
                        <div class="location-box-title">Expressway</div>
                        <div class="selection-grid location-grid">
                            <button class="selector-btn is-location hurong-loc" onclick="selectLoc('hurong', 'A1', this)">A1</button>
                            <button class="selector-btn is-location hurong-loc" onclick="selectLoc('hurong', 'A2', this)">A2</button>
                            <button class="selector-btn is-location hurong-loc" onclick="selectLoc('hurong', 'A3', this)">A3</button>
                            <button class="selector-btn is-location hurong-loc" onclick="selectLoc('hurong', 'A4', this)">A4</button>
                            <button class="selector-btn is-location hurong-loc" onclick="selectLoc('hurong', 'B1', this)">B1</button>
                            <button class="selector-btn is-location hurong-loc" onclick="selectLoc('hurong', 'B2', this)">B2</button>
                            <button class="selector-btn is-location hurong-loc" onclick="selectLoc('hurong', 'C1', this)">C1</button>
                            <button class="selector-btn is-location hurong-loc" onclick="selectLoc('hurong', 'C2', this)">C2</button>
                            <button class="selector-btn is-location hurong-loc" onclick="selectLoc('hurong', 'D1-EXP', this)">D1</button>
                        </div>
                        <button class="selector-btn is-all-drones hurong-loc" onclick="selectAllDrones('hurong')">ALL DRONES</button>
                    </div>

                    <!-- Intersection (New) -->
                    <div class="location-box">
                        <div class="location-box-title">Intersection</div>
                        <div class="selection-grid location-grid">
                            <button class="selector-btn is-location hurong-loc" onclick="selectLoc('hurong', 'B3', this)">B3</button>
                            <button class="selector-btn is-location hurong-loc" onclick="selectLoc('hurong', 'C3', this)">C3</button>
                            <button class="selector-btn is-location hurong-loc" onclick="selectLoc('hurong', 'C4', this)">C4</button>
                            <button class="selector-btn is-location hurong-loc" onclick="selectLoc('hurong', 'D1-INT', this)">D1</button>
                            <button class="selector-btn is-location hurong-loc" onclick="selectLoc('hurong', 'D2', this)">D2</button>
                            <button class="selector-btn is-location hurong-loc" onclick="selectLoc('hurong', 'E1', this)">E1</button>
                            <button class="selector-btn is-location hurong-loc" onclick="selectLoc('hurong', 'E2', this)">E2</button>
                            <button class="selector-btn is-location hurong-loc" onclick="selectLoc('hurong', 'E3', this)">E3</button>
                        </div>
                    </div>
                </div>

                <!-- Date and Time Section (Side by Side) -->
                <div class="control-panel-row">
                    <!-- Date -->
                    <div class="control-column-left">
                        <div class="panel-header">DATE</div>
                        <div class="date-grid hurong-date-container" style="margin-top: 0.5rem;">
                             <!-- Populated by JS -->
                        </div>
                    </div>

                    <!-- Time -->
                    <div class="control-column-right">
                        <div class="panel-header">TIME</div>
                        <div id="hurong-time-container" class="time-grid-container" style="margin-top: 0.5rem;">
                            <!-- JS will populate -->
                        </div>
                    </div>
                </div>

                <!-- Info Button -->
                <button class="info-btn" onclick="showInfo('hurong')">DOWNLOAD</button>
            </div>
        </div>
        
        <!-- Result Display -->
        <div id="hurong-result-display" class="result-box">
          <div id="hurong-result-content"></div>
        </div>
      </div>

      <!-- Yingtian Dataset Interface -->
      <h3 class="dataset-title" style="margin-top: 3rem;">Yingtian Dataset</h3>
      <div class="box download-interface" id="interface-yingtian">
        <div class="columns">
            <!-- Map Section (Same placeholder or remove if not needed, keeping for layout consistency) -->
            <div class="column is-two-thirds">
                <div class="panel-header">MAP</div>
                <div class="map-container">
                    <img src="static/images/yingtian_topology.png" alt="Dataset Map">
                </div>
            </div>

            <!-- Controls Section -->
            <div class="column">
                <!-- Date and Time Section (Stacked since no Location) -->
                
                <!-- Date -->
                <div class="panel-header">DATE</div>
                <div class="date-grid-2col yingtian-date-container" style="margin-top: 0.5rem; margin-bottom: 1rem;">
                        <!-- Populated by JS -->
                </div>

                <!-- Time -->
                <div class="panel-header">TIME</div>
                <div id="yingtian-time-container" class="time-grid-container" style="margin-top: 0.5rem;">
                    <!-- JS will populate -->
                </div>

                <!-- Info Button -->
                <button class="info-btn" onclick="showInfo('yingtian')" style="margin-top: 2rem;">DOWNLOAD</button>
            </div>
        </div>
        
        <!-- Result Display -->
        <div id="yingtian-result-display" class="result-box">
          <div id="yingtian-result-content"></div>
        </div>
      </div>

      <div class="box">
        <div id="download-content" class="content markdown-body">
            <p class="has-text-centered">Loading download instructions...</p>
        </div>
      </div>
      
    </div>
  </section>

  <script>
    // ============================================
    // CONFIGURATION: Edit filenames and download URLs here
    // ============================================
    // For files not ready yet, set downloadUrl to null or ''
    // The system will display a coming soon message
    const CONFIG = {
        hurong: {
            // Zenodo base URLs for reference (links shown to user)
            zenodoUrls: {
                expressway: 'https://zenodo.org/records/18616228',
                expresswayAll: 'https://zenodo.org/records/18609836',
                intersection: 'https://zenodo.org/records/18616239'
            },

            dates: [
                {
                    id: '20220616',
                    label: 'June 16, 2022',
                    locations: {
                        'A1': {
                            zenodoType: 'expressway',
                            times: [
                                { time: '07:00', filename: 'SWIFTraj_20220616_0700_A1.csv', downloadUrl: '' },
                                { time: '07:25', filename: 'SWIFTraj_20220616_0725_A1.csv', downloadUrl: '' },
                                { time: '07:50', filename: 'SWIFTraj_20220616_0750_A1.csv', downloadUrl: '' },
                                { time: '08:15', filename: 'SWIFTraj_20220616_0815_A1.csv', downloadUrl: '' },
                                { time: '08:45', filename: 'SWIFTraj_20220616_0845_A1.csv', downloadUrl: '' }
                            ]
                        },
                        'A2': {
                            zenodoType: 'expressway',
                            times: [
                                { time: '07:00', filename: 'SWIFTraj_20220616_0700_A2.csv', downloadUrl: '' },
                                { time: '07:25', filename: 'SWIFTraj_20220616_0725_A2.csv', downloadUrl: '' },
                                { time: '07:50', filename: 'SWIFTraj_20220616_0750_A2.csv', downloadUrl: '' },
                                { time: '08:15', filename: 'SWIFTraj_20220616_0815_A2.csv', downloadUrl: '' },
                                { time: '08:45', filename: 'SWIFTraj_20220616_0845_A2.csv', downloadUrl: '' }
                            ]
                        },
                        'A3': {
                            zenodoType: 'expressway',
                            times: [
                                { time: '07:00', filename: 'SWIFTraj_20220616_0700_A3.csv', downloadUrl: '' },
                                { time: '07:25', filename: 'SWIFTraj_20220616_0725_A3.csv', downloadUrl: '' },
                                { time: '07:50', filename: 'SWIFTraj_20220616_0750_A3.csv', downloadUrl: '' },
                                { time: '08:15', filename: 'SWIFTraj_20220616_0815_A3.csv', downloadUrl: '' },
                                { time: '08:45', filename: 'SWIFTraj_20220616_0845_A3.csv', downloadUrl: '' }
                            ]
                        },
                        'A4': {
                            zenodoType: 'expressway',
                            times: [
                                { time: '07:00', filename: 'SWIFTraj_20220616_0700_A4.csv', downloadUrl: '' },
                                { time: '07:25', filename: 'SWIFTraj_20220616_0725_A4.csv', downloadUrl: '' },
                                { time: '07:50', filename: 'SWIFTraj_20220616_0750_A4.csv', downloadUrl: '' },
                                { time: '08:15', filename: 'SWIFTraj_20220616_0815_A4.csv', downloadUrl: '' },
                                { time: '08:45', filename: 'SWIFTraj_20220616_0845_A4.csv', downloadUrl: '' }
                            ]
                        },
                        'B1': {
                            zenodoType: 'expressway',
                            times: [
                                { time: '07:00', filename: 'SWIFTraj_20220616_0700_B1.csv', downloadUrl: '' },
                                { time: '07:25', filename: 'SWIFTraj_20220616_0725_B1.csv', downloadUrl: '' },
                                { time: '07:50', filename: 'SWIFTraj_20220616_0750_B1.csv', downloadUrl: '' },
                                { time: '08:15', filename: 'SWIFTraj_20220616_0815_B1.csv', downloadUrl: '' },
                                { time: '08:45', filename: 'SWIFTraj_20220616_0845_B1.csv', downloadUrl: '' }
                            ]
                        },
                        'B2': {
                            zenodoType: 'expressway',
                            times: [
                                { time: '07:00', filename: 'SWIFTraj_20220616_0700_B2.csv', downloadUrl: '' },
                                { time: '07:25', filename: 'SWIFTraj_20220616_0725_B2.csv', downloadUrl: '' },
                                { time: '07:50', filename: 'SWIFTraj_20220616_0750_B2.csv', downloadUrl: '' },
                                { time: '08:15', filename: 'SWIFTraj_20220616_0815_B2.csv', downloadUrl: '' },
                                { time: '08:45', filename: 'SWIFTraj_20220616_0845_B2.csv', downloadUrl: '' }
                            ]
                        },
                        'C1': {
                            zenodoType: 'expressway',
                            times: [
                                { time: '07:00', filename: 'SWIFTraj_20220616_0700_C1.csv', downloadUrl: '' },
                                { time: '07:25', filename: 'SWIFTraj_20220616_0725_C1.csv', downloadUrl: '' },
                                { time: '07:50', filename: 'SWIFTraj_20220616_0750_C1.csv', downloadUrl: '' },
                                { time: '08:15', filename: 'SWIFTraj_20220616_0815_C1.csv', downloadUrl: '' },
                                { time: '08:45', filename: 'SWIFTraj_20220616_0845_C1.csv', downloadUrl: '' }
                            ]
                        },
                        'C2': {
                            zenodoType: 'expressway',
                            times: [
                                { time: '07:00', filename: 'SWIFTraj_20220616_0700_C2.csv', downloadUrl: '' },
                                { time: '07:25', filename: 'SWIFTraj_20220616_0725_C2.csv', downloadUrl: '' },
                                { time: '07:50', filename: 'SWIFTraj_20220616_0750_C2.csv', downloadUrl: '' },
                                { time: '08:15', filename: 'SWIFTraj_20220616_0815_C2.csv', downloadUrl: '' },
                                { time: '08:45', filename: 'SWIFTraj_20220616_0845_C2.csv', downloadUrl: '' }
                            ]
                        },
                        'D1-EXP': {
                            zenodoType: 'expressway',
                            times: [
                                { time: '07:00', filename: 'SWIFTraj_20220616_0700_D1.csv', downloadUrl: '' },
                                { time: '07:25', filename: 'SWIFTraj_20220616_0725_D1.csv', downloadUrl: '' },
                                { time: '07:50', filename: 'SWIFTraj_20220616_0750_D1.csv', downloadUrl: '' },
                                { time: '08:15', filename: 'SWIFTraj_20220616_0815_D1.csv', downloadUrl: '' },
                                { time: '08:45', filename: 'SWIFTraj_20220616_0845_D1.csv', downloadUrl: '' }
                            ]
                        },
                        // ========== INTERSECTION LOCATIONS ==========
                        'B3': {
                            zenodoType: 'intersection',
                            times: [
                                { time: '07:00', filename: 'SWIFTraj_20220616_0700_B3.csv', downloadUrl: '' },
                                { time: '07:25', filename: 'SWIFTraj_20220616_0725_B3.csv', downloadUrl: '' },
                                { time: '07:50', filename: 'SWIFTraj_20220616_0750_B3.csv', downloadUrl: '' },
                                { time: '08:15', filename: 'SWIFTraj_20220616_0815_B3.csv', downloadUrl: '' },
                                { time: '08:45', filename: 'SWIFTraj_20220616_0845_B3.csv', downloadUrl: '' }
                            ]
                        },
                        'C3': {
                            zenodoType: 'intersection',
                            times: [
                                { time: '07:00', filename: 'SWIFTraj_20220616_0700_C3.csv', downloadUrl: '' },
                                { time: '07:25', filename: 'SWIFTraj_20220616_0725_C3.csv', downloadUrl: '' },
                                { time: '07:50', filename: 'SWIFTraj_20220616_0750_C3.csv', downloadUrl: '' },
                                { time: '08:15', filename: 'SWIFTraj_20220616_0815_C3.csv', downloadUrl: '' },
                                { time: '08:45', filename: 'SWIFTraj_20220616_0845_C3.csv', downloadUrl: '' }
                            ]
                        },
                        'C4': {
                            zenodoType: 'intersection',
                            times: [
                                { time: '07:00', filename: 'SWIFTraj_20220616_0700_C4.csv', downloadUrl: '' },
                                { time: '07:25', filename: 'SWIFTraj_20220616_0725_C4.csv', downloadUrl: '' },
                                { time: '07:50', filename: 'SWIFTraj_20220616_0750_C4.csv', downloadUrl: '' },
                                { time: '08:15', filename: 'SWIFTraj_20220616_0815_C4.csv', downloadUrl: '' },
                                { time: '08:45', filename: 'SWIFTraj_20220616_0845_C4.csv', downloadUrl: '' }
                            ]
                        },
                        'D1-INT': {
                            zenodoType: 'intersection',
                            times: [
                                { time: '07:00', filename: 'SWIFTraj_20220616_0700_D1.csv', downloadUrl: '' },
                                { time: '07:25', filename: 'SWIFTraj_20220616_0725_D1.csv', downloadUrl: '' },
                                { time: '07:50', filename: 'SWIFTraj_20220616_0750_D1.csv', downloadUrl: '' },
                                { time: '08:15', filename: 'SWIFTraj_20220616_0815_D1.csv', downloadUrl: '' },
                                { time: '08:45', filename: 'SWIFTraj_20220616_0845_D1.csv', downloadUrl: '' }
                            ]
                        },
                        'D2': {
                            zenodoType: 'intersection',
                            times: [
                                { time: '07:00', filename: 'SWIFTraj_20220616_0700_D2.csv', downloadUrl: '' },
                                { time: '07:25', filename: 'SWIFTraj_20220616_0725_D2.csv', downloadUrl: '' },
                                { time: '07:50', filename: 'SWIFTraj_20220616_0750_D2.csv', downloadUrl: '' },
                                { time: '08:15', filename: 'SWIFTraj_20220616_0815_D2.csv', downloadUrl: '' },
                                { time: '08:45', filename: 'SWIFTraj_20220616_0845_D2.csv', downloadUrl: '' }
                            ]
                        },
                        'E1': {
                            zenodoType: 'intersection',
                            times: [
                                { time: '07:00', filename: 'SWIFTraj_20220616_0700_E1.csv', downloadUrl: '' },
                                { time: '07:25', filename: 'SWIFTraj_20220616_0725_E1.csv', downloadUrl: '' },
                                { time: '07:50', filename: 'SWIFTraj_20220616_0750_E1.csv', downloadUrl: '' },
                                { time: '08:15', filename: 'SWIFTraj_20220616_0815_E1.csv', downloadUrl: '' },
                                { time: '08:45', filename: 'SWIFTraj_20220616_0845_E1.csv', downloadUrl: '' }
                            ]
                        },
                        'E2': {
                            zenodoType: 'intersection',
                            times: [
                                { time: '07:00', filename: 'SWIFTraj_20220616_0700_E2.csv', downloadUrl: '' },
                                { time: '07:25', filename: 'SWIFTraj_20220616_0725_E2.csv', downloadUrl: '' },
                                { time: '07:50', filename: 'SWIFTraj_20220616_0750_E2.csv', downloadUrl: '' },
                                { time: '08:15', filename: 'SWIFTraj_20220616_0815_E2.csv', downloadUrl: '' },
                                { time: '08:45', filename: 'SWIFTraj_20220616_0845_E2.csv', downloadUrl: '' }
                            ]
                        },
                        'E3': {
                            zenodoType: 'intersection',
                            times: [
                                { time: '07:00', filename: 'SWIFTraj_20220616_0700_E3.csv', downloadUrl: '' },
                                { time: '07:25', filename: 'SWIFTraj_20220616_0725_E3.csv', downloadUrl: '' },
                                { time: '07:50', filename: 'SWIFTraj_20220616_0750_E3.csv', downloadUrl: '' },
                                { time: '08:15', filename: 'SWIFTraj_20220616_0815_E3.csv', downloadUrl: '' },
                                { time: '08:45', filename: 'SWIFTraj_20220616_0845_E3.csv', downloadUrl: '' }
                            ]
                        },
                        // ========== ALL DRONES ==========
                        'ALL': {
                            zenodoType: 'expresswayAll',
                            times: [
                                { time: '07:00', filename: 'SWIFTraj_20220616_0700_ALL.csv', downloadUrl: '' },
                                { time: '07:25', filename: 'SWIFTraj_20220616_0725_ALL.csv', downloadUrl: '' },
                                { time: '07:50', filename: 'SWIFTraj_20220616_0750_ALL.csv', downloadUrl: '' },
                                { time: '08:15', filename: 'SWIFTraj_20220616_0815_ALL.csv', downloadUrl: '' },
                                { time: '08:45', filename: 'SWIFTraj_20220616_0845_ALL.csv', downloadUrl: '' }
                            ]
                        }
                    }
                },
                {
                    id: '20220617',
                    label: 'June 17, 2022',
                    locations: {
                        'A1': {
                            zenodoType: 'expressway',
                            times: [
                                { time: '07:00', filename: 'Hurong_20220617_A1_F1.zip', downloadUrl: 'https://zenodo.org/records/18616228/files/Hurong_20220617_A1_F1.zip' },
                                { time: '07:25', filename: 'Hurong_20220617_A1_F2.zip', downloadUrl: 'https://zenodo.org/records/18616228/files/Hurong_20220617_A1_F2.zip' },
                                { time: '07:55', filename: 'Hurong_20220617_A1_F3.zip', downloadUrl: '' },
                                { time: '08:25', filename: 'Hurong_20220617_A1_F4.zip', downloadUrl: '' },
                                { time: '08:50', filename: 'Hurong_20220617_A1_F5.zip', downloadUrl: '' }
                            ]
                        },
                        'A2': {
                            zenodoType: 'expressway',
                            times: [
                                { time: '07:00', filename: 'Hurong_20220617_A2_F1.zip', downloadUrl: 'https://zenodo.org/records/18616228/files/Hurong_20220617_A2_F1.zip' },
                                { time: '07:25', filename: 'Hurong_20220617_A2_F2.zip', downloadUrl: 'https://zenodo.org/records/18616228/files/Hurong_20220617_A2_F2.zip' },
                                { time: '07:55', filename: 'Hurong_20220617_A2_F3.zip', downloadUrl: '' },
                                { time: '08:25', filename: 'Hurong_20220617_A2_F4.zip', downloadUrl: '' },
                                { time: '08:50', filename: 'Hurong_20220617_A2_F5.zip', downloadUrl: '' }
                            ]
                        },
                        'A3': {
                            zenodoType: 'expressway',
                            times: [
                                { time: '07:00', filename: 'Hurong_20220617_A3_F1.zip', downloadUrl: 'https://zenodo.org/records/18616228/files/Hurong_20220617_A3_F1.zip' },
                                { time: '07:25', filename: 'Hurong_20220617_A3_F2.zip', downloadUrl: 'https://zenodo.org/records/18616228/files/Hurong_20220617_A3_F2.zip' },
                                { time: '07:55', filename: 'Hurong_20220617_A3_F3.zip', downloadUrl: '' },
                                { time: '08:25', filename: 'Hurong_20220617_A3_F4.zip', downloadUrl: '' },
                                { time: '08:50', filename: 'Hurong_20220617_A3_F5.zip', downloadUrl: '' }
                            ]
                        },
                        'A4': {
                            zenodoType: 'expressway',
                            times: [
                                { time: '07:00', filename: 'Hurong_20220617_A4_F1.zip', downloadUrl: 'https://zenodo.org/records/18616228/files/Hurong_20220617_A4_F1.zip' },
                                { time: '07:25', filename: 'Hurong_20220617_A4_F2.zip', downloadUrl: 'https://zenodo.org/records/18616228/files/Hurong_20220617_A4_F2.zip' },
                                { time: '07:55', filename: 'Hurong_20220617_A4_F3.zip', downloadUrl: '' },
                                { time: '08:25', filename: 'Hurong_20220617_A4_F4.zip', downloadUrl: '' },
                                { time: '08:50', filename: 'Hurong_20220617_A4_F5.zip', downloadUrl: '' }
                            ]
                        },
                        'B1': {
                            zenodoType: 'expressway',
                            times: [
                                { time: '07:00', filename: 'Hurong_20220617_B1_F1.zip', downloadUrl: 'https://zenodo.org/records/18616228/files/Hurong_20220617_B1_F1.zip' },
                                { time: '07:25', filename: 'Hurong_20220617_B1_F2.zip', downloadUrl: 'https://zenodo.org/records/18616228/files/Hurong_20220617_B1_F2.zip' },
                                { time: '07:55', filename: 'Hurong_20220617_B1_F3.zip', downloadUrl: '' },
                                { time: '08:25', filename: 'Hurong_20220617_B1_F4.zip', downloadUrl: '' },
                                { time: '08:50', filename: 'Hurong_20220617_B1_F5.zip', downloadUrl: '' }
                            ]
                        },
                        'B2': {
                            zenodoType: 'expressway',
                            times: [
                                { time: '07:00', filename: 'Hurong_20220617_B2_F1.zip', downloadUrl: 'https://zenodo.org/records/18616228/files/Hurong_20220617_B2_F1.zip' },
                                { time: '07:25', filename: 'Hurong_20220617_B2_F2.zip', downloadUrl: 'https://zenodo.org/records/18616228/files/Hurong_20220617_B2_F2.zip' },
                                { time: '07:55', filename: 'Hurong_20220617_B2_F3.zip', downloadUrl: '' },
                                { time: '08:25', filename: 'Hurong_20220617_B2_F4.zip', downloadUrl: '' },
                                { time: '08:50', filename: 'Hurong_20220617_B2_F5.zip', downloadUrl: '' }
                            ]
                        },
                        'C1': {
                            zenodoType: 'expressway',
                            times: [
                                { time: '07:00', filename: 'Hurong_20220617_C1_F1.zip', downloadUrl: 'https://zenodo.org/records/18616228/files/Hurong_20220617_C1_F1.zip' },
                                { time: '07:25', filename: 'Hurong_20220617_C1_F2.zip', downloadUrl: 'https://zenodo.org/records/18616228/files/Hurong_20220617_C1_F2.zip' },
                                { time: '07:55', filename: 'Hurong_20220617_C1_F3.zip', downloadUrl: '' },
                                { time: '08:25', filename: 'Hurong_20220617_C1_F4.zip', downloadUrl: '' },
                                { time: '08:50', filename: 'Hurong_20220617_C1_F5.zip', downloadUrl: '' }
                            ]
                        },
                        'C2': {
                            zenodoType: 'expressway',
                            times: [
                                { time: '07:00', filename: 'Hurong_20220617_C2_F1.zip', downloadUrl: 'https://zenodo.org/records/18616228/files/Hurong_20220617_C2_F1.zip' },
                                { time: '07:25', filename: 'Hurong_20220617_C2_F2.zip', downloadUrl: 'https://zenodo.org/records/18616228/files/Hurong_20220617_C2_F2.zip' },
                                { time: '07:55', filename: 'Hurong_20220617_C2_F3.zip', downloadUrl: '' },
                                { time: '08:25', filename: 'Hurong_20220617_C2_F4.zip', downloadUrl: '' },
                                { time: '08:50', filename: 'Hurong_20220617_C2_F5.zip', downloadUrl: '' }
                            ]
                        },
                        'D1-EXP': {
                            zenodoType: 'expressway',
                            times: [
                                { time: '07:00', filename: 'Hurong_20220617_D1_F1.zip', downloadUrl: 'https://zenodo.org/records/18616228/files/Hurong_20220617_D1_F1.zip' },
                                { time: '07:25', filename: 'Hurong_20220617_D1_F2.zip', downloadUrl: 'https://zenodo.org/records/18616228/files/Hurong_20220617_D1_F2.zip' },
                                { time: '07:55', filename: 'Hurong_20220617_D1_F3.zip', downloadUrl: '' },
                                { time: '08:25', filename: 'Hurong_20220617_D1_F4.zip', downloadUrl: '' },
                                { time: '08:50', filename: 'Hurong_20220617_D1_F5.zip', downloadUrl: '' }
                            ]
                        },
                        // ========== INTERSECTION LOCATIONS ==========
                        'B3': {
                            zenodoType: 'intersection',
                            times: [
                                { time: '07:00', filename: 'Hurong_20220617_B3_F1.zip', downloadUrl: 'https://zenodo.org/records/18616239/files/Hurong_20220617_B3_F1.zip' },
                                { time: '07:25', filename: 'Hurong_20220617_B3_F2.zip', downloadUrl: 'https://zenodo.org/records/18616239/files/Hurong_20220617_B3_F2.zip' },
                                { time: '07:55', filename: 'Hurong_20220617_B3_F3.zip', downloadUrl: '' },
                                { time: '08:25', filename: 'Hurong_20220617_B3_F4.zip', downloadUrl: '' },
                                { time: '08:50', filename: 'Hurong_20220617_B3_F5.zip', downloadUrl: '' }
                            ]
                        },
                        'C3': {
                            zenodoType: 'intersection',
                            times: [
                                { time: '07:00', filename: 'Hurong_20220617_C3_F1.zip', downloadUrl: 'https://zenodo.org/records/18616239/files/Hurong_20220617_C3_F1.zip' },
                                { time: '07:25', filename: 'Hurong_20220617_C3_F2.zip', downloadUrl: 'https://zenodo.org/records/18616239/files/Hurong_20220617_C3_F2.zip' },
                                { time: '07:55', filename: 'Hurong_20220617_C3_F3.zip', downloadUrl: '' },
                                { time: '08:25', filename: 'Hurong_20220617_C3_F4.zip', downloadUrl: '' },
                                { time: '08:50', filename: 'Hurong_20220617_C3_F5.zip', downloadUrl: '' }
                            ]
                        },
                        'C4': {
                            zenodoType: 'intersection',
                            times: [
                                { time: '07:00', filename: 'Hurong_20220617_C4_F1.zip', downloadUrl: 'https://zenodo.org/records/18616239/files/Hurong_20220617_C4_F1.zip' },
                                { time: '07:25', filename: 'Hurong_20220617_C4_F2.zip', downloadUrl: 'https://zenodo.org/records/18616239/files/Hurong_20220617_C4_F2.zip' },
                                { time: '07:55', filename: 'Hurong_20220617_C4_F3.zip', downloadUrl: '' },
                                { time: '08:25', filename: 'Hurong_20220617_C4_F4.zip', downloadUrl: '' },
                                { time: '08:50', filename: 'Hurong_20220617_C4_F5.zip', downloadUrl: '' }
                            ]
                        },
                        'D1-INT': {
                            zenodoType: 'intersection',
                            times: [
                                { time: '07:00', filename: 'Hurong_20220617_D1_F1.zip', downloadUrl: 'https://zenodo.org/records/18616239/files/Hurong_20220617_D1_F1.zip' },
                                { time: '07:25', filename: 'Hurong_20220617_D1_F2.zip', downloadUrl: 'https://zenodo.org/records/18616239/files/Hurong_20220617_D1_F2.zip' },
                                { time: '07:55', filename: 'Hurong_20220617_D1_F3.zip', downloadUrl: '' },
                                { time: '08:25', filename: 'Hurong_20220617_D1_F4.zip', downloadUrl: '' },
                                { time: '08:50', filename: 'Hurong_20220617_D1_F5.zip', downloadUrl: '' }
                            ]
                        },
                        'D2': {
                            zenodoType: 'intersection',
                            times: [
                                { time: '07:00', filename: 'Hurong_20220617_D2_F1.zip', downloadUrl: 'https://zenodo.org/records/18616239/files/Hurong_20220617_D2_F1.zip' },
                                { time: '07:25', filename: 'Hurong_20220617_D2_F2.zip', downloadUrl: 'https://zenodo.org/records/18616239/files/Hurong_20220617_D2_F2.zip' },
                                { time: '07:55', filename: 'Hurong_20220617_D2_F3.zip', downloadUrl: '' },
                                { time: '08:25', filename: 'Hurong_20220617_D2_F4.zip', downloadUrl: '' },
                                { time: '08:50', filename: 'Hurong_20220617_D2_F5.zip', downloadUrl: '' }
                            ]
                        },
                        'E1': {
                            zenodoType: 'intersection',
                            times: [
                                { time: '07:00', filename: 'Hurong_20220617_E1_F1.zip', downloadUrl: 'https://zenodo.org/records/18616239/files/Hurong_20220617_E1_F1.zip' },
                                { time: '07:25', filename: 'Hurong_20220617_E1_F2.zip', downloadUrl: 'https://zenodo.org/records/18616239/files/Hurong_20220617_E1_F2.zip' },
                                { time: '07:55', filename: 'Hurong_20220617_E1_F3.zip', downloadUrl: '' },
                                { time: '08:25', filename: 'Hurong_20220617_E1_F4.zip', downloadUrl: '' },
                                { time: '08:50', filename: 'Hurong_20220617_E1_F5.zip', downloadUrl: '' }
                            ]
                        },
                        'E2': {
                            zenodoType: 'intersection',
                            times: [
                                { time: '07:00', filename: 'Hurong_20220617_E2_F1.zip', downloadUrl: 'https://zenodo.org/records/18616239/files/Hurong_20220617_E2_F1.zip' },
                                { time: '07:25', filename: 'Hurong_20220617_E2_F2.zip', downloadUrl: 'https://zenodo.org/records/18616239/files/Hurong_20220617_E2_F2.zip' },
                                { time: '07:55', filename: 'Hurong_20220617_E2_F3.zip', downloadUrl: '' },
                                { time: '08:25', filename: 'Hurong_20220617_E2_F4.zip', downloadUrl: '' },
                                { time: '08:50', filename: 'Hurong_20220617_E2_F5.zip', downloadUrl: '' }
                            ]
                        },
                        'E3': {
                            zenodoType: 'intersection',
                            times: [
                                { time: '07:00', filename: 'Hurong_20220617_E3_F1.zip', downloadUrl: 'https://zenodo.org/records/18616239/files/Hurong_20220617_E3_F1.zip' },
                                { time: '07:25', filename: 'Hurong_20220617_E3_F2.zip', downloadUrl: 'https://zenodo.org/records/18616239/files/Hurong_20220617_E3_F2.zip' },
                                { time: '07:55', filename: 'Hurong_20220617_E3_F3.zip', downloadUrl: '' },
                                { time: '08:25', filename: 'Hurong_20220617_E3_F4.zip', downloadUrl: '' },
                                { time: '08:50', filename: 'Hurong_20220617_E3_F5.zip', downloadUrl: '' }
                            ]
                        },
                        // ========== ALL DRONES ==========
                        'ALL': {
                            zenodoType: 'expresswayAll',
                            times: [
                                { time: '07:00', filename: 'Hurong_20220617_A1A2A3A4B1B2C1C2D1_F1.zip', downloadUrl: 'https://zenodo.org/records/18609836/files/Hurong_20220617_A1A2A3A4B1B2C1C2D1_F1.zip' },
                                { time: '07:25', filename: 'Hurong_20220617_A1A2A3A4B1B2C1C2D1_F2.zip', downloadUrl: 'https://zenodo.org/records/18609836/files/Hurong_20220617_A1A2A3A4B1B2C1C2D1_F2.zip' },
                                { time: '07:55', filename: 'Hurong_20220617_A1A2A3A4B1B2C1C2D1_F3.zip', downloadUrl: '' },
                                { time: '08:25', filename: 'Hurong_20220617_A1A2A3A4B1B2C1C2D1_F4.zip', downloadUrl: '' },
                                { time: '08:50', filename: 'Hurong_20220617_A1A2A3A4B1B2C1C2D1_F5.zip', downloadUrl: '' }
                            ]
                        }
                    }
                }
            ]
        },
        yingtian: {
             // Zenodo base URL for all Yingtian files
             zenodoUrl: 'https://zenodo.org/records/18616662',

             dates: [
                {
                    id: '20220707',
                    label: 'July 7, 2022',
                    times: [
                        { time: '07:00', filename: 'Yingtian_20220707_Y1Y2_F1_A.zip', downloadUrl: 'https://zenodo.org/records/18616662/files/Yingtian_20220707_Y1Y2_F1_A.zip' },
                        { time: '07:13', filename: 'Yingtian_20220707_Y1Y2_F1_B.zip', downloadUrl: 'https://zenodo.org/records/18616662/files/Yingtian_20220707_Y1Y2_F1_B.zip' },
                        { time: '07:29', filename: 'Yingtian_20220707_Y1Y2_F2_A.zip', downloadUrl: '' },
                        { time: '07:48', filename: 'Yingtian_20220707_Y1Y2_F2_B.zip', downloadUrl: '' }
                    ]
                },
                {
                    id: '20220708',
                    label: 'July 8, 2022',
                    times: [
                        { time: '07:02', filename: 'Yingtian_20220708_Y1Y2_F2_A.zip', downloadUrl: '' },
                        { time: '07:18', filename: 'Yingtian_20220708_Y1Y2_F2_B.zip', downloadUrl: '' },
                        { time: '07:32', filename: 'Yingtian_20220708_Y1Y2_F2_C.zip', downloadUrl: '' },
                        { time: '07:52', filename: 'Yingtian_20220708_Y1Y2_F2_D.zip', downloadUrl: '' }
                    ]
                },
                {
                    id: '20220709',
                    label: 'July 9, 2022',
                    times: [
                        { time: '07:00', filename: 'Yingtian_20220709_Y1Y2_F3_A.zip', downloadUrl: '' },
                        { time: '07:25', filename: 'Yingtian_20220709_Y1Y2_F3_B.zip', downloadUrl: '' },
                        { time: '07:55', filename: 'Yingtian_20220709_Y1Y2_F3_C.zip', downloadUrl: '' },
                        { time: '08:25', filename: 'Yingtian_20220709_Y1Y2_F3_D.zip', downloadUrl: '' },
                        { time: '08:50', filename: 'Yingtian_20220709_Y1Y2_F3_E.zip', downloadUrl: '' }
                    ]
                },
                {
                    id: '20220710',
                    label: 'July 10, 2022',
                    times: [
                        { time: '07:00', filename: 'Yingtian_20220710_Y1Y2_F1_A.zip', downloadUrl: '' },
                        { time: '07:25', filename: 'Yingtian_20220710_Y1Y2_F1_B.zip', downloadUrl: '' },
                        { time: '07:55', filename: 'Yingtian_20220710_Y1Y2_F2_C.zip', downloadUrl: '' },
                        { time: '08:25', filename: 'Yingtian_20220710_Y1Y2_F2_D.zip', downloadUrl: '' },
                        { time: '08:50', filename: 'Yingtian_20220710_Y1Y2_F2_E.zip', downloadUrl: '' }
                    ]
                }
            ]
        }
    };

    // State for each dataset
    let states = {
        hurong: {
            location: null,
            date: null,
            time: null
        },
        yingtian: {
            location: null, // Not used but kept for consistency if needed
            date: null,
            time: null
        }
    };

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
        loadMarkdown('download-content', 'static/md/download.md');
        initInterface('hurong');
        initInterface('yingtian');
    });

    function initInterface(dataset) {
        // Render Date Buttons
        const dateContainer = document.querySelector(`.${dataset}-date-container`);
        if(!dateContainer) return;

        dateContainer.innerHTML = '';
        const dates = CONFIG[dataset].dates;

        dates.forEach(d => {
            const btn = document.createElement('button');
            btn.className = `selector-btn is-date ${dataset}-date-btn`;
            btn.textContent = d.label;
            btn.onclick = () => selectDate(dataset, d.id);
            dateContainer.appendChild(btn);
        });

        // Select first date by default
        if(dates.length > 0) {
            selectDate(dataset, dates[0].id);
        }
    }

    function selectLoc(dataset, locId, btnElement) {
        states[dataset].location = locId;

        // Update UI - Scope to specific dataset container
        const container = document.getElementById(`interface-${dataset}`);
        container.querySelectorAll('.is-location').forEach(btn => {
            if(btn === btnElement) {
                btn.classList.add('active');
            } else {
                btn.classList.remove('active');
            }
        });

        // Deactivate All Drones in this dataset
        const allDronesBtn = container.querySelector('.is-all-drones');
        if(allDronesBtn && allDronesBtn !== btnElement) allDronesBtn.classList.remove('active');

        clearResult(dataset);

        // For Hurong, re-render times when location changes
        if(dataset === 'hurong' && states[dataset].date) {
            renderTimes(dataset, states[dataset].date);
        }
    }

    function selectAllDrones(dataset) {
        states[dataset].location = 'ALL';

        const container = document.getElementById(`interface-${dataset}`);

        // Update UI: Deactivate all individual locations
        container.querySelectorAll('.is-location').forEach(btn => btn.classList.remove('active'));

        // Activate All Drones button
        const allDronesBtn = container.querySelector('.is-all-drones');
        if(allDronesBtn) allDronesBtn.classList.add('active');

        clearResult(dataset);

        // For Hurong, re-render times when location changes
        if(dataset === 'hurong' && states[dataset].date) {
            renderTimes(dataset, states[dataset].date);
        }
    }

    function selectDate(dataset, dateId) {
        states[dataset].date = dateId;
        states[dataset].time = null; // Reset time
        
        // Update UI Dates
        const container = document.getElementById(`interface-${dataset}`);
        const dates = CONFIG[dataset].dates;
        const dateBtns = container.querySelectorAll(`.${dataset}-date-btn`);
        
        dateBtns.forEach((btn, index) => {
            if(dates[index].id === dateId) {
                btn.classList.add('active');
            } else {
                btn.classList.remove('active');
            }
        });

        // Render Times
        renderTimes(dataset, dateId);
        clearResult(dataset);
    }

    function renderTimes(dataset, dateId) {
        const container = document.getElementById(`${dataset}-time-container`);
        if(!container) return;
        container.innerHTML = '';

        const dateConfig = CONFIG[dataset].dates.find(d => d.id === dateId);
        if(!dateConfig) return;

        let timesList = [];

        if(dataset === 'hurong') {
            // For Hurong, need location to be selected first
            const currentLocation = states[dataset].location;
            if(!currentLocation) {
                // No location selected yet, show placeholder
                container.innerHTML = '<p style="color: #999; text-align: center; padding: 1rem;">Select a location first</p>';
                return;
            }

            const locationConfig = dateConfig.locations[currentLocation];
            if(!locationConfig) {
                container.innerHTML = '<p style="color: #999; text-align: center; padding: 1rem;">No data for this location</p>';
                return;
            }

            timesList = locationConfig.times;
        } else {
            // For Yingtian, times are directly under date
            timesList = dateConfig.times;
        }

        timesList.forEach(timeItem => {
            const btn = document.createElement('button');
            btn.className = 'selector-btn is-time';

            // Handle both string format and object format
            const timeDisplay = typeof timeItem === 'string' ? timeItem : timeItem.time;
            btn.textContent = timeDisplay;
            btn.onclick = () => selectTime(dataset, timeItem, btn);
            container.appendChild(btn);
        });
    }

    function selectTime(dataset, timeItem, btnElement) {
        // Store the full time item (can be string or object with filename/url)
        states[dataset].time = timeItem;

        // Update UI - Scope to dataset time container
        const container = document.getElementById(`${dataset}-time-container`);
        container.querySelectorAll('.is-time').forEach(b => b.classList.remove('active'));
        btnElement.classList.add('active');

        clearResult(dataset);
    }

    function showInfo(dataset) {
        const resultBox = document.getElementById(`${dataset}-result-display`);
        const resultContent = document.getElementById(`${dataset}-result-content`);
        const currentState = states[dataset];

        // Validation
        if (dataset === 'hurong') {
             if (!currentState.location || !currentState.date || !currentState.time) {
                alert('Please select a Location, Date, and Time.');
                return;
            }
        } else {
            // Yingtian (no location)
             if (!currentState.date || !currentState.time) {
                alert('Please select a Date and Time.');
                return;
            }
        }

        if (dataset === 'hurong') {
            // Hurong: use configured filename and download URL from location config
            const timeItem = currentState.time;
            const dateConfig = CONFIG.hurong.dates.find(d => d.id === currentState.date);
            const locationConfig = dateConfig?.locations[currentState.location];

            if (!locationConfig) {
                alert('Configuration error: Location data not found.');
                return;
            }

            const downloadUrl = timeItem.downloadUrl;
            const filename = timeItem.filename;
            const zenodoType = locationConfig.zenodoType;
            const zenodoRecordUrl = CONFIG.hurong.zenodoUrls[zenodoType];

            // Check if file is ready
            if (!downloadUrl || downloadUrl.trim() === '') {
                // File not ready - show coming soon message
                resultContent.innerHTML = `
                    <p style="font-size: 1.05rem; color: #666; text-align: center; margin: 0;">
                        <i class="fas fa-clock" style="margin-right: 8px;"></i>
                        Data for this selection will be released soon.
                    </p>
                `;
            } else {
                // File ready - show filename and Zenodo link
                resultContent.innerHTML = `
                    <p>Download from <a href="${zenodoRecordUrl}" target="_blank" rel="noopener noreferrer" style="color: #094aed; font-weight: 600; text-decoration: underline;">Zenodo</a>. The corresponding filenames are as follows:</p>
                    <strong>Filename:</strong> <span>${filename}</span>
                `;

                // Open the download URL in new tab
                window.open(downloadUrl, '_blank', 'noopener,noreferrer');
            }

            resultBox.style.display = 'block';
        } else if (dataset === 'yingtian') {
            // Yingtian: use configured filename and download URL
            const timeItem = currentState.time;
            const downloadUrl = timeItem.downloadUrl;

            // Check if file is ready
            if (!downloadUrl || downloadUrl.trim() === '') {
                // File not ready - show coming soon message
                resultContent.innerHTML = `
                    <p style="font-size: 1.05rem; color: #666; text-align: center; margin: 0;">
                        <i class="fas fa-clock" style="margin-right: 8px;"></i>
                        Data for this time slot will be released soon.
                    </p>
                `;
            } else {
                // File ready - show filename and Zenodo link
                const filename = timeItem.filename;
                resultContent.innerHTML = `
                    <p>Download from <a href="https://zenodo.org/records/18616662" target="_blank" rel="noopener noreferrer" style="color: #094aed; font-weight: 600; text-decoration: underline;">Zenodo</a>. The corresponding filenames are as follows:</p>
                    <strong>Filename:</strong> <span>${filename}</span>
                `;

                // Open the download URL in new tab
                window.open(downloadUrl, '_blank', 'noopener,noreferrer');
            }

            resultBox.style.display = 'block';
        }
    }
    
    function clearResult(dataset) {
        const box = document.getElementById(`${dataset}-result-display`);
        if(box) box.style.display = 'none';
    }
  </script>

</body>
</html>
